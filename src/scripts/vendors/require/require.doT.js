define(["doTCompiler","text"],function(doT,text){var buildMap={};function load(name,req,onload,requireConfig,isBuild){if(isBuild&&buildMap.hasOwnProperty(name))return onload(buildMap[name]);var config=requireConfig.doT||{};var fileName=name+(config.ext||".dot");if(config.templateSettings)for(var option in config.templateSettings)doT.templateSettings[option]=config.templateSettings[option];text.get(req.toUrl(fileName),function(tmplData){var template=doT.template(tmplData);buildMap[name]=template;onload(template)})}
function write(pluginName,moduleName,writeFile){if(buildMap.hasOwnProperty(moduleName))writeFile("define('"+pluginName+"!"+moduleName+"',function(){return "+buildMap[moduleName].toString()+";});\n")}return{load:load,write:write}});